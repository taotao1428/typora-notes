# 系统设计

为什么需要系统设计？

为了以更小的成本实现当前的需求，并方便以后扩展。



可能遇到的问题

1. 技术选型。是否使用缓存，使用哪种缓存，是够使用负载均衡，使用哪些负载均衡等
2. 硬件估计。机器规格大小和数量，带宽大小，储存类型和属性





思考的角度

1. 网络协议。tcp，udp，http，websocket
2. 负载均衡。lvs，nginx，haproxy
3. 缓存。redis，memcache本地缓存
4. 集群。单机，微服务，哪种微服务架构
5. 数据库。SQL，nosql，sharding，newSQL
6. 分库分表。如何拆分
7. 锁。乐观锁和悲观锁
8. 估算成本。计算，存储，网络



衡量标准

1. 延时：执行操作需要花费的时间
2. 吞吐量：单位时间，执行操作的个数

系统设计的目标：在满足延时的情况下，最大化吞吐量



高可用的实现方式

1. 复制
2. 故障切换



## 一致性

最终一致性

强一致性

弱一致性





## 数据库

1. 关系型数据库+中间件
2. 非关系型数据库
3. newSql。分布式系统
4. 大数据储存
5. 流式储存



## 思路

### 了解系统

1. 系统的使用场景，用户量
2. 我们期望的容量



### 计算系统容量

1. 网络带宽
2. 数据量



### 设计系统架构





## 武器库

### 锁同步

1. 乐观锁
2. 悲观锁



### 分布式理论和事务相关

1. CAP理论
2. ACID和BASE
3. 强一致和最终一致。对数据的要求



### 数据冗余与拆分

1. 垂直拆分和水平拆分
2. 一致性hash



### 高性能

1. 缓存
2. CDN
3. 负载均衡